<!doctype html><html lang=ja><head><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編","datePublished":"2023-06-11T00:00:00Z","dateModified":"2023-06-11T00:00:00Z","author":{"@type":"Person","name":"kita21","image":"https://ki-ta.blog/images/avatar.png"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/ki-ta.blog\/023-mysql-create-user-first-part\/"},"publisher":{"@type":"Organization","name":"ゆるだら ブログ","logo":{"@type":"ImageObject","url":"https://ki-ta.blog/images/avatar.png"}},"description":"SHOW CREATE USERを出力されたSQL文を一つ一つ解説し、よくわからないからちょっとわかったを目指す 前編","keywords":[]}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.111.3 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="kita21"><meta name=keywords content><meta name=description content="Understanding SQL statements to execute CREATE USER with confidence First Part"><meta property="og:description" content="Understanding SQL statements to execute CREATE USER with confidence First Part"><meta property="og:type" content="article"><meta property="og:title" content="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編"><meta name=twitter:title content="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編"><meta property="og:url" content="https://ki-ta.blog/023-mysql-create-user-first-part/"><meta property="twitter:url" content="https://ki-ta.blog/023-mysql-create-user-first-part/"><meta property="og:site_name" content="ゆるだら ブログ"><meta property="og:description" content="Understanding SQL statements to execute CREATE USER with confidence First Part"><meta name=twitter:description content="Understanding SQL statements to execute CREATE USER with confidence First Part"><meta property="og:locale" content="ja"><meta property="article:published_time" content="2023-06-11T00:00:00"><meta property="article:modified_time" content="2023-06-11T00:00:00"><meta property="article:section" content="データベース"><meta property="article:tag" content="MySQL"><meta name=twitter:card content="summary"><meta property="og:image" content="https://ki-ta.blog/images/avatar.png"><meta property="twitter:image" content="https://ki-ta.blog/images/avatar.png"><title>[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編</title><link rel=icon href=https://ki-ta.blog/images/avatar.png><link rel=canonical href=https://ki-ta.blog/023-mysql-create-user-first-part/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://ki-ta.blog/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-VHM9P1Z719"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VHM9P1Z719",{anonymize_ip:!1})}</script></head><body><div id=blog><header id=header data-behavior=1><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://ki-ta.blog/ aria-label=ホームページへ>ゆるだら ブログ</a></div></header><nav id=sidebar data-behavior=1><div class=sidebar-container><div class=sidebar-profile><a href=https://ki-ta.blog/#about aria-label=著者についてもっと読む><img class=sidebar-profile-picture src=https://ki-ta.blog/images/avatar.png alt=プロフィール画像></a><h4 class=sidebar-profile-name>kita21</h4><h5 class=sidebar-profile-bio><strong>no rest no life</strong></h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>ホーム</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>カテゴリー</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>タグ</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/archives title=Archives><i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden=true></i>
<span class=sidebar-button-desc>アーカイブ</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/kita21 target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href="https://www.facebook.com/profile.php?id=100035276171326" target=_blank rel=noopener title=Facebook><i class="sidebar-button-icon fab fa-lg fa-facebook" aria-hidden=true></i>
<span class=sidebar-button-desc>Facebook</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div id=main data-behavior=1 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編</h1><div class="postShorten-meta post-meta"><time datetime=2023-06-11T00:00:00Z>6月 11, 2023</time>
<span>カテゴリー</span>
<a class=category-link href=https://ki-ta.blog/categories/%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9>データベース</a></div></div><div class="post-content markdown"><div class=main-content-wrap><h1 id=table-of-contents>目次</h1><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#環境>環境</a></li><li><a href=#setup>Setup</a><ul><li><a href=#インストール>インストール</a></li><li><a href=#mysql-user作成>MySQL USER作成</a></li><li><a href=#外部接続を可能にする>外部接続を可能にする</a></li></ul></li><li><a href=#各sql文の説明>各SQL文の説明</a><ul><li><a href=#identified>IDENTIFIED</a><ul><li><a href=#by>BY</a></li><li><a href=#as>AS</a></li><li><a href=#mysql_native_password>mysql_native_password</a></li></ul></li><li><a href=#password-expire>PASSWORD EXPIRE</a><ul><li><a href=#interval-n-day>INTERVAL N DAY</a></li><li><a href=#never>NEVER</a></li><li><a href=#default>DEFAULT</a></li><li><a href=#指定なし>指定なし</a></li><li><a href=#期限切れになった時の挙動>期限切れになった時の挙動</a></li></ul></li><li><a href=#account>ACCOUNT</a></li></ul></li><li><a href=#終わりに>終わりに</a></li><li><a href=#参考文献>参考文献</a></li></ul></nav><h1 id=introduction>Introduction</h1><p>業務でMySQLの既存ユーザーの設定を反映した新しいユーザーを作成するタスクを実施していました。<br>既存のユーザーを<code>SHOW CREATE USER</code>しユーザー名とパスワードだけ変更すればいいやと思ってSQLを実行して返ってきた結果が以下でした。もちろんユーザーとパスワードは記事用に変えてします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#f92672>`</span>develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span><span style=color:#f92672>`@`%`</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;XXXXX&#39;</span> REQUIRE <span style=color:#66d9ef>NONE</span> PASSWORD EXPIRE <span style=color:#66d9ef>DEFAULT</span> ACCOUNT UNLOCK PASSWORD HISTORY <span style=color:#66d9ef>DEFAULT</span> PASSWORD REUSE INTERVAL <span style=color:#66d9ef>DEFAULT</span> PASSWORD REQUIRE <span style=color:#66d9ef>CURRENT</span> <span style=color:#66d9ef>DEFAULT</span>
</span></span></code></pre></div><p><code>'develop-user'@'%'</code>がユーザーです。<br>この時に<code>IDENTIFIED</code>から後のSQL文が一瞬わからなく、これ流すの怖くない？っと思ってSQLの意味を調べ、ついでに検証したので備忘録としてこの記事に残したいと思います。<br>最近、プログラミングやクラウドの構築ばかりなので、今回のようなSQLとかの基礎が抜けていたり忘れてしまっていたりするので今回いい振り返りになりました</p><h1 id=環境>環境</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ lsb_release -a
</span></span><span style=display:flex><span>No LSB modules are available.
</span></span><span style=display:flex><span>Distributor ID:	Ubuntu
</span></span><span style=display:flex><span>Description:	Ubuntu 22.04.2 LTS
</span></span><span style=display:flex><span>Release:	22.04
</span></span><span style=display:flex><span>Codename:	jammy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ mysql --version
</span></span><span style=display:flex><span>mysql  Ver 8.0.33-0ubuntu0.22.04.2 <span style=color:#66d9ef>for</span> Linux on x86_64 <span style=color:#f92672>((</span>Ubuntu<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ mysqld --version
</span></span><span style=display:flex><span>/usr/sbin/mysqld  Ver 8.0.33-0ubuntu0.22.04.2 <span style=color:#66d9ef>for</span> Linux on x86_64 <span style=color:#f92672>((</span>Ubuntu<span style=color:#f92672>))</span>
</span></span></code></pre></div><h1 id=setup>Setup</h1><p>今回は、UbuntuのEC2を立てて検証しました。EC2にssh接続した後の操作を記載します。</p><h2 id=インストール>インストール</h2><p>まず、MySQLのクライアントとサーバーをインストールします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo apt install mysql-server mysql-client
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ systemctl status mysql
</span></span><span style=display:flex><span>● mysql.service - MySQL Community Server
</span></span><span style=display:flex><span>     Loaded: loaded <span style=color:#f92672>(</span>/lib/systemd/system/mysql.service; enabled; vendor preset: enabled<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     Active: active <span style=color:#f92672>(</span>running<span style=color:#f92672>)</span> since Sun 2023-05-28 14:47:30 UTC; <span style=color:#ae81ff>5</span> days ago
</span></span><span style=display:flex><span>   Main PID: <span style=color:#ae81ff>2271</span> <span style=color:#f92672>(</span>mysqld<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     Status: <span style=color:#e6db74>&#34;Server is operational&#34;</span>
</span></span><span style=display:flex><span>      Tasks: <span style=color:#ae81ff>67</span> <span style=color:#f92672>(</span>limit: 1141<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     Memory: 451.7M
</span></span><span style=display:flex><span>        CPU: 32min 32.928s
</span></span><span style=display:flex><span>     CGroup: /system.slice/mysql.service
</span></span><span style=display:flex><span>             └─2271 /usr/sbin/mysqld
</span></span></code></pre></div><h2 id=mysql-user作成>MySQL USER作成</h2><p>起動しているMySQLに接続します。初期設定ではrootユーザーへの接続は、sudoコマンドでパスワードは必要ありません。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo mysql -u root
</span></span></code></pre></div><p>rootユーザーは、<code>root@localhost</code>のため、<code>-h localhost</code>をつけても接続できます。localhostのため、EC2をパブリックアクセスできるようにしても外部からはアクセスできません。<br>次に検証用のユーザーを作成します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span> <span style=color:#66d9ef>FROM</span> mysql.<span style=color:#66d9ef>user</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span>;
</span></span></code></pre></div><p>はい、貧弱パスワードのユーザーが作成されました。
次に作成したユーザーと同じ設定を作成できる<code>SHOW CREATE USER</code>を実行します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#f92672>`</span>develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span><span style=color:#f92672>`@`%`</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;XXXXX&#39;</span> REQUIRE <span style=color:#66d9ef>NONE</span> PASSWORD EXPIRE <span style=color:#66d9ef>DEFAULT</span> ACCOUNT UNLOCK PASSWORD HISTORY <span style=color:#66d9ef>DEFAULT</span> PASSWORD REUSE INTERVAL <span style=color:#66d9ef>DEFAULT</span> PASSWORD REQUIRE <span style=color:#66d9ef>CURRENT</span> <span style=color:#66d9ef>DEFAULT</span>
</span></span></code></pre></div><p>MySQL8系で出力されたSHOW CREATE USERが上記になります。MySQL5系では出力が異なります。</p><h2 id=外部接続を可能にする>外部接続を可能にする</h2><p>AWSを外部から接続できるようにしても外部からMySQL自体の設定で弾かれて接続できません。
MySQLの設定項目である<code>bind_address</code>を変更します。設定ファイルを変更しMySQLを再起動して設定を読み込ませます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#75715e>#bind-address            = 127.0.0.1</span>
</span></span><span style=display:flex><span>bind-address            <span style=color:#f92672>=</span> 0.0.0.0
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo systemctl restart mysql
</span></span></code></pre></div><p>これで全IPからアクセスできるようになりました。いつものことですが、セキュリティには気をつけてください。記事ではガバガバの設定をしていますが、個人や仕事などで設定する際はセキュリティ設定を慎重に行ってください。<br>また余談になりますが<code>bind_address</code>は、SQLで変更できないです</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SET</span> <span style=color:#66d9ef>GLOBAL</span> bind_address <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;0.0.0.0&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>1238</span> (HY000): <span style=color:#66d9ef>Variable</span> <span style=color:#e6db74>&#39;bind_address&#39;</span> <span style=color:#66d9ef>is</span> a <span style=color:#66d9ef>read</span> <span style=color:#66d9ef>only</span> <span style=color:#66d9ef>variable</span>
</span></span></code></pre></div><h1 id=各sql文の説明>各SQL文の説明</h1><p>上記で出力されたCREATE文を意味ごとに分割すると以下に分けられます
この記事で説明する項目</p><ul><li>CREATE USER <code>develop-user</code>@<code>%</code></li><li>IDENTIFIED WITH &lsquo;caching_sha2_password&rsquo; AS &lsquo;XXXXX&rsquo;</li><li>REQUIRE NONE</li><li>PASSWORD EXPIRE DEFAULT</li><li>ACCOUNT UNLOCK
次回の記事で説明する項目</li><li>PASSWORD HISTORY DEFAULT</li><li>PASSWORD REUSE INTERVAL DEFAULT</li><li>PASSWORD REQUIRE CURRENT DEFAULT</li></ul><p><code>CREATE USER</code>はみたままですね。今回はオプション部分を説明します。<br><code>REQUIRE</code>は暗号化接続を利用するか否かです。今回の記事では証明書設定を説明すると長くなるので省きます。<code>REQUIRE NONE</code>は暗号化接続を利用しないという意味になります。<br>以下で各オプションを説明していきますが、正直<a href=https://dev.mysql.com/doc/refman/8.0/ja/create-user.html>公式ドキュメント</a>に全て記載してあるので、原文がいい人はそちらをどうぞ公式がアレルギーの人はぜひ見て行ってください。</p><h2 id=identified>IDENTIFIED</h2><p>はじめにIDENTIFIED構文を説明します。<br>IDENTIFIEDはユーザーにパスワードを設定する時に使用するオプションになります。</p><h3 id=by>BY</h3><p>一番簡単なIDENTIFIEDを使用したSQLは以下のような<code>BY</code>を使用したSQLになります。Setupで作成したユーザーを更新します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span></code></pre></div><p>になります。<code>password</code>の部分は実際の設定するパスワードを入力してください。<br>BYは後者の文字列を暗号化してパスワードを生成します。わかりやすいように結果を縦出力にします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$F<span style=color:#f92672>!</span><span style=color:#e6db74>&#34;HMEafwN2;PK19TBLFxi/jQAo2xvDJFBUSSWh5uUXI7pXdh8qMxBZ8
</span></span></span></code></pre></div><p>authentication_stringが暗号化されたパスワードです。今回で言うとpasswordをハッシュ化していますね。<br><code>BY</code>で生成されるauthentication_stringは毎回異なります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>*************************** 1. row ***************************
</span></span><span style=display:flex><span>                 Host: %
</span></span><span style=display:flex><span>                 User: develop-user
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: $A$005$(*E;^@UO(2{ig3/5BtgS6Mbwz/M8lOm/QCz15AAqqFCmf1DS4bFUqao/
</span></span></code></pre></div><h3 id=as>AS</h3><p>全く同じハッシュ値でパスワードを設定したい場合は、<code>AS</code>を使用します。<br>ASを使用する場合は、pluginも指定してください。上記を見るとpluginはcaching_sha2_passwordですね。pluginを指定する時は<code>WITH</code>を使用します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;$A$005$F!&#34;HMEafwN2;PK19TBLFxi/jQAo2xvDJFBUSSWh5uUXI7pXdh8qMxBZ8&#39;</span>;
</span></span></code></pre></div><p>ただ上記のSQLだと失敗してしまいます。<code>ERROR 1827 (HY000): The password hash doesn't have the expected format.</code><br>公式に以下の記述があります。</p><blockquote><p>MySQL 8.0.17 の時点では、ハッシュ文字列は文字列リテラルまたは 16 進数値のいずれかになります。 後者は、print_identified_with_as_hex システム変数が有効になっている場合に、印刷不可能な文字を含むパスワードハッシュに対して SHOW CREATE USER によって表示される値のタイプに対応します。</p></blockquote><p>要は、印刷不可能な文字が含まれていることがあり、端末ディスプレイやその他の環境で悪影響があるため<code>print_identified_with_as_hex</code>をONにしてねということになります。
現バージョンのデフォルトでは、OFFになっているためONにします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>GLOBAL</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;print_identified_with_as_hex&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Variable_name                <span style=color:#f92672>|</span> Value <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> print_identified_with_as_hex <span style=color:#f92672>|</span> <span style=color:#66d9ef>OFF</span>   <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SET</span> <span style=color:#66d9ef>GLOBAL</span> print_identified_with_as_hex <span style=color:#f92672>=</span> <span style=color:#66d9ef>ON</span>;
</span></span></code></pre></div><p>コピーするハッシュ化されたパスワードは、<code>SHOW CREATE USER</code>で取得します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#66d9ef>for</span> develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span><span style=color:#f92672>@%</span>                                                                                                                                                                                                                                                                                                                                         <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#f92672>`</span>develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span><span style=color:#f92672>`@`%`</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#ae81ff>0</span>x244124303035242318071B253B7664782D1401575D532E77715807566543765666364D525570446879384766457767305751722E6750784A4E416373466C45723165786C312F REQUIRE <span style=color:#66d9ef>NONE</span> PASSWORD EXPIRE <span style=color:#66d9ef>DEFAULT</span> ACCOUNT UNLOCK PASSWORD HISTORY <span style=color:#66d9ef>DEFAULT</span> PASSWORD REUSE INTERVAL <span style=color:#66d9ef>DEFAULT</span> PASSWORD REQUIRE <span style=color:#66d9ef>CURRENT</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</span></span></span></code></pre></div><p>では、ASでパスワードを設定します。<br>ハッシュ値の部分は<code>'xxxxx'</code>や<code>"xxxx"</code>などでクォーテーションをつけないようにしたください。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#ae81ff>0</span>x244124303035242318071B253B7664782D1401575D532E77715807566543765666364D525570446879384766457767305751722E6750784A4E416373466C45723165786C312F;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><p>次は問題なくできましたね。ハッシュ値が同じなので前と同じパスワードでログインできます。</p><h3 id=mysql_native_password>mysql_native_password</h3><p>MySQLは2つの認証プラグインを用意しています。<br>→ <a href=https://dev.mysql.com/doc/refman/8.0/ja/caching-sha2-pluggable-authentication.html>https://dev.mysql.com/doc/refman/8.0/ja/caching-sha2-pluggable-authentication.html</a><br>MySQL8のデフォルトはcaching_sha2_passwordになっています。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>GLOBAL</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;default_authentication_plugin&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>-------------------------------+-----------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Variable_name                 <span style=color:#f92672>|</span> Value                 <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>-------------------------------+-----------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> default_authentication_plugin <span style=color:#f92672>|</span> caching_sha2_password <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>-------------------------------+-----------------------+
</span></span></span></code></pre></div><p>MySQL8以前は、mysql_native_passwordがデフォルトの認証プラグインなのでMySQLのバージョンアップ後のユーザー複製時は気をつけてください。<br>また、mysql_native_passwordはprint_identified_with_as_hexを考慮せずIDENTIFIEDのASを使用できます。</p><h2 id=password-expire>PASSWORD EXPIRE</h2><p>パスワードの有効期限を決定します。<br><a href="https://dev.mysql.com/doc/refman/8.0/ja/password-management.html#:~:text=%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E6%89%8B%E5%8B%95%E3%81%A7%E6%9C%9F%E9%99%90%E5%88%87%E3%82%8C%E3%81%AB%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF,%E6%9C%9F%E9%99%90%E5%88%87%E3%82%8C%E3%81%A8%E3%83%9E%E3%83%BC%E3%82%AF%E3%81%97%E3%81%BE%E3%81%99%E3%80%82">公式に記載</a>ありますので、それでも十分わかりやすいです。一様、各SQLの説明と検証結果を記載していきます。</p><h3 id=interval-n-day>INTERVAL N DAY</h3><p><code>PASSWORD EXPIRE INTERVAL N DAY</code>でパスワード有効期限日数指定します。
例としては以下になります。パスワードの有効期限は一日だけとします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD EXPIRE INTERVAL <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>DAY</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed, password_lifetime
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>#</span>;vdx<span style=color:#f92672>-</span>W]S.wqXVeCvVf6MRUpDhy8GfEwg0WQr.gPxJNAcsFlEr1exl1<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>     password_expired: N
</span></span><span style=display:flex><span>password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span> <span style=color:#ae81ff>16</span>:<span style=color:#ae81ff>04</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    password_lifetime: <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>有効期限日数が達した状態でUserのステータスを再度確認してみましたが、上記と同じ表示でpassword_expiredもNのままでした。<br>しかしログイン自体は可能ですが、有効期限は切れているのでSQLの実行はできませんでした。</p><h3 id=never>NEVER</h3><p><code>PASSWORD EXPIRE NEVER</code>だと有効期限は設定されません。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD EXPIRE NEVER;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed, password_lifetime
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>#</span>;vdx<span style=color:#f92672>-</span>W]S.wqXVeCvVf6MRUpDhy8GfEwg0WQr.gPxJNAcsFlEr1exl1<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>     password_expired: N
</span></span><span style=display:flex><span>password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span> <span style=color:#ae81ff>16</span>:<span style=color:#ae81ff>04</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    password_lifetime: <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><h3 id=default>DEFAULT</h3><p><code>PASSWORD EXPIRE DEFAULT</code>は、MySQLの設定されている<code>default_password_lifetime</code>で決定されます。デフォルトでは0に設定されており0は無期限を表します。そのため、default_password_lifetimeが0の状態のPASSWORD EXPIRE DEFAULTは<code>PASSWORD EXPIRE NEVER</code>と同じ意味になります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>GLOBAL</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;default_password_lifetime&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>---------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Variable_name             <span style=color:#f92672>|</span> Value <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>---------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> default_password_lifetime <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span>     <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>---------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD EXPIRE <span style=color:#66d9ef>DEFAULT</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed, password_lifetime
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>#</span>;vdx<span style=color:#f92672>-</span>W]S.wqXVeCvVf6MRUpDhy8GfEwg0WQr.gPxJNAcsFlEr1exl1<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>     password_expired: N
</span></span><span style=display:flex><span>password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span> <span style=color:#ae81ff>16</span>:<span style=color:#ae81ff>04</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span></code></pre></div><p>password_lifetimeがNEVERは0だったのに対し、DEFAULTは値がNULLになりdefault_password_lifetimeによって有効期限が決まります。<br>また、<a href=https://yoku0825.blogspot.com/2015/06/mysql-574defaultpasswordlifetime.html>MySQL 5.7.4で導入されたdefault_password_lifetimeがじわじわくる</a>の記事に書かれていますが、MySQL5.7.4 ~ 5.7.10までは、default_password_lifetimeはデフォルトで360に設定されているため気をつけてください。何も考えないで設定すると事故ります！</p><h3 id=指定なし>指定なし</h3><p>特に引数を指定しない<code>PASSWORD EXPIRE</code>はコマンドを実行した瞬間に有効期限切れになります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD EXPIRE;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed, password_lifetime
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>#</span>;vdx<span style=color:#f92672>-</span>W]S.wqXVeCvVf6MRUpDhy8GfEwg0WQr.gPxJNAcsFlEr1exl1<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>     password_expired: Y
</span></span><span style=display:flex><span>password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span> <span style=color:#ae81ff>16</span>:<span style=color:#ae81ff>04</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    password_lifetime: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>row</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><p>password_expiredがYになっていることがわかりますね。</p><h3 id=期限切れになった時の挙動>期限切れになった時の挙動</h3><p>公式はこちら → <a href=https://dev.mysql.com/doc/refman/8.0/ja/expired-password-handling.html>6.2.16 期限切れパスワードのサーバー処理</a><br>パスワードの期限切れ後、ログイン自体は可能ですがSQLが実行できなくなってしまいます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> mysql <span style=color:#f92672>-</span>u develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span> <span style=color:#f92672>-</span>ppassword
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_USER</span>();
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>1820</span> (HY000): You must <span style=color:#66d9ef>reset</span> your password <span style=color:#66d9ef>using</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#66d9ef>statement</span> <span style=color:#66d9ef>before</span> executing this <span style=color:#66d9ef>statement</span>.
</span></span></code></pre></div><p>MySQLWorkbenchはログイン自体ができないことがわかります。これはログイン時にデータベース情報などのデータを取得しているからと思われます。<div class=figure><img class=fig-img src=https://ki-ta.blog/images/posts/023/023-mysqlworkbench-password-expired.png></div></p><p>SQLが実行できないと記載しましたが、エラー文にも記載がある通りパスワードリセットコマンドはパスワード期限切れのユーザーでも実行できます。もちろんパスワードリセット後SQLが実行できるようになります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> mysql <span style=color:#f92672>-</span>u develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span> <span style=color:#f92672>-</span>ppassword
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#ae81ff>0</span>x244124303035242318071B253B7664782D1401575D532E77715807566543765666364D525570446879384766457767305751722E6750784A4E416373466C45723165786C312F PASSWORD EXPIRE <span style=color:#66d9ef>DEFAULT</span>;
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_USER</span>();
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CURRENT_USER</span>() <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span><span style=color:#f92672>@%</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>----------------+
</span></span></span></code></pre></div><p>このような挙動はサンドボックスモードというらしいです。</p><blockquote><p>「「サンドボックスモード、」」では、クライアントは期限切れのパスワードのリセットに必要な操作のみを実行できます。</p></blockquote><p>MySQLのパスワード切れなどは公式にも</p><blockquote><p>サーバーが期限切れパスワードクライアントを切断するか、サンドボックスモードに制限するかは、クライアントとサーバーの設定の組合せによって決まります。</p></blockquote><p>と記載がある通りMySQLクライアントやMySQLWorkbench、アプリケーションなどによって挙動が少し変わるため気をつけてください。</p><h2 id=account>ACCOUNT</h2><p>アカウントを使用不可にするか否かのコマンドです。
以下はアカウントを使用不可(LOCK)にします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> ACCOUNT <span style=color:#66d9ef>LOCK</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed, password_lifetime, account_locked
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>#</span>;vdx<span style=color:#f92672>-</span>W]S.wqXVeCvVf6MRUpDhy8GfEwg0WQr.gPxJNAcsFlEr1exl1<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>     password_expired: N
</span></span><span style=display:flex><span>password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span> <span style=color:#ae81ff>18</span>:<span style=color:#ae81ff>00</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>    password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>       account_locked: Y
</span></span></code></pre></div><p>アカウントロックしてもログイン中はSQL実行できますが、一回ログアウトするとログインできません。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> ACCOUNT <span style=color:#66d9ef>LOCK</span>;
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_USER</span>();
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CURRENT_USER</span>() <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span><span style=color:#f92672>@%</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>mysql<span style=color:#f92672>&gt;</span> exit;
</span></span><span style=display:flex><span>Bye
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> mysql <span style=color:#f92672>-</span>u develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span> <span style=color:#f92672>-</span>ppassword
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3118</span> (HY000): <span style=color:#66d9ef>Access</span> denied <span style=color:#66d9ef>for</span> <span style=color:#66d9ef>user</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span>. Account <span style=color:#66d9ef>is</span> locked.
</span></span></code></pre></div><p><code>UNLOCK</code>でロックアカウントを使用可能(UNLOCK)にします。<br>ロックユーザーはログインできないのでrootユーザーでUNLOCKします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> ACCOUNT UNLOCK;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed, password_lifetime, account_locked
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>               plugin: caching_sha2_password
</span></span><span style=display:flex><span>authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>#</span>;vdx<span style=color:#f92672>-</span>W]S.wqXVeCvVf6MRUpDhy8GfEwg0WQr.gPxJNAcsFlEr1exl1<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>     password_expired: N
</span></span><span style=display:flex><span>password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span> <span style=color:#ae81ff>18</span>:<span style=color:#ae81ff>00</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>    password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>       account_locked: N
</span></span></code></pre></div><h1 id=終わりに>終わりに</h1><p>長くなるので、次のSQLオプションは後編に記載します。</p><h1 id=参考文献>参考文献</h1><ul><li><a href=https://dev.mysql.com/doc/refman/8.0/ja/create-user.html>MySQL doc / 13.7.1.3 CREATE USER ステートメント</a></li><li><a href=https://dev.mysql.com/doc/refman/8.0/ja/password-management.html>MySQL doc / 6.2.15 パスワード管理</a></li><li><a href=https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_print_identified_with_as_hex>MySQL Server System Variables / print_identified_with_as_hex</a></li><li><a href=https://casualdevelopers.com/tech-tips/how-to-fix-2003-error-when-connecting-to-mysql-server/>MySQLで「ERROR 2003 (HY000): Can’t connect to MySQL server」と怒られた時の対処法</a></li><li><a href=https://yoku0825.blogspot.com/2015/06/mysql-574defaultpasswordlifetime.html>MySQL 5.7.4で導入されたdefault_password_lifetimeがじわじわくる</a></li></ul></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">タグ</span><br><a class="tag tag--primary tag--small" href=https://ki-ta.blog/tags/mysql/>MySQL</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/024-mysql-create-user-latter-part/ data-tooltip="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編" aria-label="次: [MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">次</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/022-cfn07-cicd/ data-tooltip="[CloudFormation] CFnで環境作り完全版 Part7. CICD編" aria-label="前: [CloudFormation] CFnで環境作り完全版 Part7. CICD編"><span class="hide-xs hide-sm text-small icon-mr">前</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label=この記事を共有する><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label=トップに戻る><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2023 <a href=https://github.com/kita21>kita21</a>. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=1><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/024-mysql-create-user-latter-part/ data-tooltip="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編" aria-label="次: [MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">次</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/022-cfn07-cicd/ data-tooltip="[CloudFormation] CFnで環境作り完全版 Part7. CICD編" aria-label="前: [CloudFormation] CFnで環境作り完全版 Part7. CICD編"><span class="hide-xs hide-sm text-small icon-mr">前</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label=この記事を共有する><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label=トップに戻る><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://ki-ta.blog/images/avatar.png alt=プロフィール画像><h4 id=about-card-name>kita21</h4><div id=about-card-bio><strong>no rest no life</strong></div><div id=about-card-job><i class="fa fa-briefcase"></i><br>web engineer</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Japan</div></div></div><div id=cover style=background-image:url(https://ki-ta.blog/images/cover.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://ki-ta.blog/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script>
<script async crossorigin=anonymous defer fbadminids=100035276171326 integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:"",useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(e,t){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(t)})})</script></body></html>
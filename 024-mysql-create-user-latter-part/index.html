<!doctype html><html lang=ja><head><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編","datePublished":"2023-06-24T00:00:00Z","dateModified":"2023-06-24T00:00:00Z","author":{"@type":"Person","name":"kita21","image":"https://ki-ta.blog/images/avatar.png"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/ki-ta.blog\/024-mysql-create-user-latter-part\/"},"publisher":{"@type":"Organization","name":"ゆるだら ブログ","logo":{"@type":"ImageObject","url":"https://ki-ta.blog/images/avatar.png"}},"description":"SHOW CREATE USERを出力されたSQL文を一つ一つ解説し、よくわからないからちょっとわかったを目指す 後編","keywords":[]}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.111.3 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="kita21"><meta name=keywords content><meta name=description content="Understanding SQL statements to execute CREATE USER with confidence Latter Part"><meta property="og:description" content="Understanding SQL statements to execute CREATE USER with confidence Latter Part"><meta property="og:type" content="article"><meta property="og:title" content="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編"><meta name=twitter:title content="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編"><meta property="og:url" content="https://ki-ta.blog/024-mysql-create-user-latter-part/"><meta property="twitter:url" content="https://ki-ta.blog/024-mysql-create-user-latter-part/"><meta property="og:site_name" content="ゆるだら ブログ"><meta property="og:description" content="Understanding SQL statements to execute CREATE USER with confidence Latter Part"><meta name=twitter:description content="Understanding SQL statements to execute CREATE USER with confidence Latter Part"><meta property="og:locale" content="ja"><meta property="article:published_time" content="2023-06-24T00:00:00"><meta property="article:modified_time" content="2023-06-24T00:00:00"><meta property="article:section" content="データベース"><meta property="article:tag" content="MySQL"><meta name=twitter:card content="summary"><meta property="og:image" content="https://ki-ta.blog/images/avatar.png"><meta property="twitter:image" content="https://ki-ta.blog/images/avatar.png"><title>[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編</title><link rel=icon href=https://ki-ta.blog/images/avatar.png><link rel=canonical href=https://ki-ta.blog/024-mysql-create-user-latter-part/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://ki-ta.blog/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-VHM9P1Z719"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VHM9P1Z719",{anonymize_ip:!1})}</script></head><body><div id=blog><header id=header data-behavior=1><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://ki-ta.blog/ aria-label=ホームページへ>ゆるだら ブログ</a></div></header><nav id=sidebar data-behavior=1><div class=sidebar-container><div class=sidebar-profile><a href=https://ki-ta.blog/#about aria-label=著者についてもっと読む><img class=sidebar-profile-picture src=https://ki-ta.blog/images/avatar.png alt=プロフィール画像></a><h4 class=sidebar-profile-name>kita21</h4><h5 class=sidebar-profile-bio><strong>no rest no life</strong></h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>ホーム</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>カテゴリー</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>タグ</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/archives title=Archives><i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden=true></i>
<span class=sidebar-button-desc>アーカイブ</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/kita21 target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href="https://www.facebook.com/profile.php?id=100035276171326" target=_blank rel=noopener title=Facebook><i class="sidebar-button-icon fab fa-lg fa-facebook" aria-hidden=true></i>
<span class=sidebar-button-desc>Facebook</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://ki-ta.blog/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div id=main data-behavior=1 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 後編</h1><div class="postShorten-meta post-meta"><time datetime=2023-06-24T00:00:00Z>6月 24, 2023</time>
<span>カテゴリー</span>
<a class=category-link href=https://ki-ta.blog/categories/%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9>データベース</a></div></div><div class="post-content markdown"><div class=main-content-wrap><h1 id=table-of-contents>目次</h1><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#各sql文の説明>各SQL文の説明</a><ul><li><a href=#password-history>PASSWORD HISTORY</a><ul><li><a href=#n>N</a></li><li><a href=#default>default</a></li></ul></li><li><a href=#password-reuse-interval>PASSWORD REUSE INTERVAL</a><ul><li><a href=#n-day>N DAY</a></li><li><a href=#default-1>DEFAULT</a></li></ul></li><li><a href=#パスワード制限設定のasへの影響>パスワード制限設定のASへの影響</a></li><li><a href=#password-require-current>PASSWORD REQUIRE CURRENT</a><ul><li><a href=#指定なし>指定なし</a></li><li><a href=#optional>OPTIONAL</a></li><li><a href=#default-2>DEFAULT</a></li></ul></li></ul></li><li><a href=#終わりに>終わりに</a></li></ul></nav><h1 id=introduction>Introduction</h1><p>以前の記事<a href=https://ki-ta.blog/023-mysql-create-user-first-part/>安心してCREATE USERを実行するためにSQL文を理解する 前編</a>の続きになります。</p><h1 id=各sql文の説明>各SQL文の説明</h1><p>この記事で説明する項目</p><ul><li>PASSWORD HISTORY DEFAULT</li><li>PASSWORD REUSE INTERVAL DEFAULT</li><li>PASSWORD REQUIRE CURRENT DEFAULT</li></ul><h2 id=password-history>PASSWORD HISTORY</h2><p>パスワードを再設定をする時にどの程度過去のパスワードを使い回しても良いかを決める設定を表しています。
まず、初期パスワードを設定します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span></code></pre></div><h3 id=n>N</h3><p>過去のパスワード設定をする時に過去N回までのパスワードは指定できない設定を行います。<br>過去2回までのパスワードは指定できないように設定します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD HISTORY <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                plugin: caching_sha2_password
</span></span><span style=display:flex><span> authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>#</span>;vdx<span style=color:#f92672>-</span>W]S.wqXVeCvVf6MRUpDhy8GfEwg0WQr.gPxJNAcsFlEr1exl1<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>      password_expired: N
</span></span><span style=display:flex><span> password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>15</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>07</span>:<span style=color:#ae81ff>59</span>
</span></span><span style=display:flex><span>     password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>        account_locked: N
</span></span><span style=display:flex><span>Password_reuse_history: <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p><code>Password_reuse_history</code>が2になっていますね。
では実際にどのような挙動になるか検証してみます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>パスワードを</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>回変更</span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password1&#39;</span>;
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password2&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>過去のパスワードを再設定</span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password2&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3638</span> (HY000): Cannot use these credentials <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;develop-user@%&#39;</span> because they contradict the password history policy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password1&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3638</span> (HY000): Cannot use these credentials <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;develop-user@%&#39;</span> because they contradict the password history policy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>02</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3638</span> (HY000): Cannot use these credentials <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;develop-user@%&#39;</span> because they contradict the password history policy
</span></span></code></pre></div><p>過去2回設定したパスワードは再設定できませんでしたが、過去3回以降のパスワードは設定できることがわかります<br>また過去3回目以降のパスワードを設定した場合、パスワード履歴が更新されるため再度同じパスワードでは設定できません。今回では、<code>password</code>の部分ですね。</p><h3 id=default>default</h3><p>こちら前の記事でもあった通りMySQLのデフォルトで設定されている値を元に挙動を決定する構文ですね。<br>今回は<a href=https://dev.mysql.com/doc/refman/8.0/ja/server-system-variables.html#sysvar_password_history><code>password_history</code></a>に設定されている値を元にパスワード再設定履歴を決定します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>GLOBAL</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;password_history&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Variable_name    <span style=color:#f92672>|</span> Value <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> password_history <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span>     <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------+-------+
</span></span></span></code></pre></div><p>Valueの0は、パスワード履歴の縛りをいないという意味になります。そのため、直前のパスワードでも設定可能になります。
ではデフォルトの設定を行います。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD HISTORY <span style=color:#66d9ef>DEFAULT</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                plugin: caching_sha2_password
</span></span><span style=display:flex><span>ZMr5<span style=color:#f92672>&gt;</span>entication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$FK2<span style=color:#f92672>&amp;&lt;</span>X
</span></span><span style=display:flex><span>     <span style=color:#ae81ff>21</span><span style=color:#f92672>?</span>bOomn.SFJrKAeDVOxVyZv1Li266iaBqLIdTLp.q4C0.
</span></span><span style=display:flex><span>      password_expired: N
</span></span><span style=display:flex><span> password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>18</span> <span style=color:#ae81ff>08</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>     password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>        account_locked: N
</span></span><span style=display:flex><span>Password_reuse_history: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span></code></pre></div><p><code>Password_reuse_history</code>がNULLになっていますね。前の記事で<code>password_lifetime</code>がNULLの時、MySQLの設定値を参照することを表していたので、今回も同じようにNULLだとMySQLの設定を参照するようです。</p><h2 id=password-reuse-interval>PASSWORD REUSE INTERVAL</h2><p>こちらの設定もパスワードの再設定に関するSQLになります。<br>上記のパスワード履歴と違う点は、履歴の回数ではなく期間による制限になります。<br>パスワードの再利用間隔をN日に設定して、その日数より新しいパスワードの再利用を禁止します。</p><h3 id=n-day>N DAY</h3><p>password_lifetimeの時の<code>N DAY</code>と同じですね。1を指定すると同じパスワードの再設定を1日間制限します。<br>PASSWORD REUSE INTERVALを設定する前に登録したパスワードは、再設定可能です。
いろいろややこしいと思うので検証した結果がわかりやすいと思います。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history, Password_reuse_time
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                plugin: caching_sha2_password
</span></span><span style=display:flex><span> authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$ j<span style=color:#960050;background-color:#1e0010>}</span>AY<span style=color:#f92672>&gt;</span>o<span style=color:#f92672>%</span>YM.M1EdqTDx6pnvlsf39hbhWEBUefFAvNX0yl4XAWPUD
</span></span><span style=display:flex><span>      password_expired: N
</span></span><span style=display:flex><span> password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>18</span> <span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>17</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span>     password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>        account_locked: N
</span></span><span style=display:flex><span>Password_reuse_history: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>   Password_reuse_time: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD REUSE INTERVAL <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>DAY</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history, Password_reuse_time
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                plugin: caching_sha2_password
</span></span><span style=display:flex><span> authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$_j<span style=color:#f92672>#</span>FPXte:;<span style=color:#f92672>&lt;</span>x<span style=color:#f92672>~</span>tkFk<span style=color:#f92672>/</span>x4o6d2PsheeA21k4WjEzuNmRQSx7tjm3g3Mu<span style=color:#f92672>/</span>Nd9
</span></span><span style=display:flex><span>      password_expired: N
</span></span><span style=display:flex><span> password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>18</span> <span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>18</span>:<span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>     password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>        account_locked: N
</span></span><span style=display:flex><span>Password_reuse_history: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>   Password_reuse_time: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3638</span> (HY000): Cannot use these credentials <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;develop-user@%&#39;</span> because they contradict the password history policy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password1&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>02</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password1&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3638</span> (HY000): Cannot use these credentials <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;develop-user@%&#39;</span> because they contradict the password history policy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3638</span> (HY000): Cannot use these credentials <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;develop-user@%&#39;</span> because they contradict the password history policy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* １日結果 */</span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><p>記述が多くなってしまいましたが、大体の挙動は網羅できているのではないでしょうか？</p><h3 id=default-1>DEFAULT</h3><p>はい、またまた来ましたデフォルト設定ですね。<br>パスワード日数制限の変数値は<a href=https://dev.mysql.com/doc/refman/8.0/ja/server-system-variables.html#sysvar_password_reuse_interval><code>password_reuse_interval</code></a>です。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>GLOBAL</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;password_reuse_interval&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>-------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Variable_name           <span style=color:#f92672>|</span> Value <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>-------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> password_reuse_interval <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span>     <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>-------------------------+-------+
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD REUSE INTERVAL <span style=color:#66d9ef>DEFAULT</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history, Password_reuse_time
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                plugin: caching_sha2_password
</span></span><span style=display:flex><span> authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$:;d3id<span style=color:#f92672>%</span>P<span style=color:#f92672>#</span><span style=color:#ae81ff>51</span>K<span style=color:#f92672>%&gt;</span><span style=color:#ae81ff>4</span>W98qXc0sNjF2iRMoTWxbjw<span style=color:#f92672>/</span>pMxr.FmzJd07aMeNqBc7<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>      password_expired: N
</span></span><span style=display:flex><span> password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>18</span> <span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>51</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>     password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>        account_locked: N
</span></span><span style=display:flex><span>Password_reuse_history: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>   Password_reuse_time: <span style=color:#66d9ef>NULL</span>
</span></span></code></pre></div><p>他の構文と同じく<code>Password_reuse_time</code>がNULLにに設定しているためMySQLの設定を反映し、設定値が0のため制限しないとなります。</p><h2 id=パスワード制限設定のasへの影響>パスワード制限設定のASへの影響</h2><p>実は、パスワード制限設定をして影響があるのはBYを使用したパスワードの変更のみです。ASは<code>password_history</code>と<code>password_reuse_interval</code>の影響を受けません。<br>まず検証するためにパスワードの設定制限をかけてパスワードを設定します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>/*  */</span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD HISTORY <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD REUSE INTERVAL <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>DAY</span>;
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history, Password_reuse_time
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                plugin: caching_sha2_password
</span></span><span style=display:flex><span> authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$:;d3id<span style=color:#f92672>%</span>P<span style=color:#f92672>#</span><span style=color:#ae81ff>51</span>K<span style=color:#f92672>%&gt;</span><span style=color:#ae81ff>4</span>W98qXc0sNjF2iRMoTWxbjw<span style=color:#f92672>/</span>pMxr.FmzJd07aMeNqBc7<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>      password_expired: N
</span></span><span style=display:flex><span> password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>18</span> <span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>01</span>:<span style=color:#ae81ff>59</span>
</span></span><span style=display:flex><span>     password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>        account_locked: N
</span></span><span style=display:flex><span>Password_reuse_history: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>   Password_reuse_time: <span style=color:#ae81ff>3</span>
</span></span></code></pre></div><p>では、検証してみましょう。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3638</span> (HY000): Cannot use these credentials <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;develop-user@%&#39;</span> because they contradict the password history policy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ハッシュ値はpasswordをハッシュ化したもの */</span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#ae81ff>0</span>x244124303035243B03266727393C0C1F606D3C4E73424E70377439645A5537377677576370466B314A716E70313251724764503566552F4146463348644F5434373842514339;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> <span style=color:#e6db74>&#39;caching_sha2_password&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#ae81ff>0</span>x244124303035243B03266727393C0C1F606D3C4E73424E70377439645A5537377677576370466B314A716E70313251724764503566552F4146463348644F5434373842514339;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> mysql <span style=color:#f92672>-</span>udevelop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span> <span style=color:#f92672>-</span>ppassword
</span></span></code></pre></div><p>ASは何回やっても更新できていることがわかります。</p><h2 id=password-require-current>PASSWORD REQUIRE CURRENT</h2><p>アカウントパスワードの変更の試行で現在のパスワードを指定する必要があるかどうかを制御します。</p><h3 id=指定なし>指定なし</h3><p>このSQLで指定しない場合は、パスワード変更時に現在のパスワード入力を求めます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD REQUIRE <span style=color:#66d9ef>CURRENT</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history, Password_reuse_time, Password_require_current
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                  plugin: caching_sha2_password
</span></span><span style=display:flex><span>   authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>+@~</span>UAz,;:nqY<span style=color:#960050;background-color:#1e0010>\</span>ONa6rGd0fagMVAluF8ibUteSmsMhWOk2FbqMp6SiTpA
</span></span><span style=display:flex><span>        password_expired: N
</span></span><span style=display:flex><span>   password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>18</span> <span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>22</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>       password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>          account_locked: N
</span></span><span style=display:flex><span>  Password_reuse_history: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>     Password_reuse_time: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>Password_require_current: Y
</span></span></code></pre></div><p>では変更してみましょう。develop-userでログインしてください</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ mysql -udevelop-user -ppassword
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3892</span> (HY000): <span style=color:#66d9ef>Current</span> password needs <span style=color:#66d9ef>to</span> be specified <span style=color:#66d9ef>in</span> the <span style=color:#66d9ef>REPLACE</span> clause <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>order</span> <span style=color:#66d9ef>to</span> change it.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SET</span> PASSWORD <span style=color:#66d9ef>FOR</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>3892</span> (HY000): <span style=color:#66d9ef>Current</span> password needs <span style=color:#66d9ef>to</span> be specified <span style=color:#66d9ef>in</span> the <span style=color:#66d9ef>REPLACE</span> clause <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>order</span> <span style=color:#66d9ef>to</span> change it.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#66d9ef>REPLACE</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>02</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SET</span> PASSWORD <span style=color:#66d9ef>FOR</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#66d9ef>REPLACE</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>02</span> sec)
</span></span></code></pre></div><p>ALTER、SETどちらも<code>REPLACE</code>をつけないとエラーでパスワード再設定ができないことがわかります。</p><p>rootユーザーでの変更では、REPLACEをつけなくても変更可能です。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo mysql -uroot
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SET</span> PASSWORD <span style=color:#66d9ef>FOR</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span></code></pre></div><h3 id=optional>OPTIONAL</h3><p>SQL文は</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> PASSWORD REQUIRE <span style=color:#66d9ef>CURRENT</span> OPTIONAL;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>Host</span>, <span style=color:#66d9ef>User</span>, plugin, authentication_string, password_expired, password_last_changed,password_lifetime, account_locked, Password_reuse_history, Password_reuse_time, Password_require_current
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span>  mysql.<span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;develop-user&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>User</span>: develop<span style=color:#f92672>-</span><span style=color:#66d9ef>user</span>
</span></span><span style=display:flex><span>                  plugin: caching_sha2_password
</span></span><span style=display:flex><span>   authentication_string: <span style=color:#960050;background-color:#1e0010>$</span>A$005$<span style=color:#f92672>+@~</span>UAz,;:nqY<span style=color:#960050;background-color:#1e0010>\</span>ONa6rGd0fagMVAluF8ibUteSmsMhWOk2FbqMp6SiTpA
</span></span><span style=display:flex><span>        password_expired: N
</span></span><span style=display:flex><span>   password_last_changed: <span style=color:#ae81ff>2023</span><span style=color:#f92672>-</span><span style=color:#ae81ff>06</span><span style=color:#f92672>-</span><span style=color:#ae81ff>18</span> <span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>22</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>       password_lifetime: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>          account_locked: N
</span></span><span style=display:flex><span>  Password_reuse_history: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>     Password_reuse_time: <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>Password_require_current: N
</span></span></code></pre></div><p>こちらはREPLACEをつけなくてもパスワードの再設定が可能になります。</p><h3 id=default-2>DEFAULT</h3><p>システム変数<a href=https://dev.mysql.com/doc/refman/8.0/ja/server-system-variables.html#sysvar_password_require_current>password_require_current</a>に準拠します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>GLOBAL</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;password_require_current&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>--------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Variable_name            <span style=color:#f92672>|</span> Value <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>--------------------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> password_require_current <span style=color:#f92672>|</span> <span style=color:#66d9ef>OFF</span>   <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>--------------------------+-------+
</span></span></span></code></pre></div><p>システム変数とアカウントごとの変数の設定時の挙動を下記に記載します。公式からまんま持ってきました</p><table><thead><tr><th>アカウントごとの設定</th><th>password_require_current システム変数</th><th>パスワードの変更には現在のパスワードが必要ですか。</th></tr></thead><tbody><tr><td>PASSWORD REQUIRE CURRENT</td><td>OFF</td><td>はい</td></tr><tr><td>PASSWORD REQUIRE CURRENT</td><td>ON</td><td>はい</td></tr><tr><td>PASSWORD REQUIRE CURRENT OPTIONAL</td><td>OFF</td><td>いいえ</td></tr><tr><td>PASSWORD REQUIRE CURRENT OPTIONAL</td><td>ON</td><td>いいえ</td></tr><tr><td>PASSWORD REQUIRE CURRENT DEFAULT</td><td>OFF</td><td>いいえ</td></tr><tr><td>PASSWORD REQUIRE CURRENT DEFAULT</td><td>ON</td><td>はい</td></tr></tbody></table><h1 id=終わりに>終わりに</h1><p>やっと全てのSQL構文の説明を記載しました&mldr;<br>記事を書いていく上で公式ドキュメントを見ながら記載してきましたが、やっぱり公式ドキュメントでほとんど事足りますね。ただ日本語が変だったり入門者の人にとってはとっつきにくかったりと人によっては読み解けない場合もあるので今回の記事が参考になれば嬉しいです。</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">タグ</span><br><a class="tag tag--primary tag--small" href=https://ki-ta.blog/tags/mysql/>MySQL</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/025-tf-cloudrun-gh-actions/ data-tooltip="[Terraform] CloudRunでアプリケーションを動かすチュートリアル" aria-label="次: [Terraform] CloudRunでアプリケーションを動かすチュートリアル"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">次</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/023-mysql-create-user-first-part/ data-tooltip="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編" aria-label="前: [MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編"><span class="hide-xs hide-sm text-small icon-mr">前</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label=この記事を共有する><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label=トップに戻る><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2023 <a href=https://github.com/kita21>kita21</a>. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=1><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/025-tf-cloudrun-gh-actions/ data-tooltip="[Terraform] CloudRunでアプリケーションを動かすチュートリアル" aria-label="次: [Terraform] CloudRunでアプリケーションを動かすチュートリアル"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">次</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://ki-ta.blog/023-mysql-create-user-first-part/ data-tooltip="[MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編" aria-label="前: [MySQL] 安心してCREATE USERを実行するためにSQL文を理解する 前編"><span class="hide-xs hide-sm text-small icon-mr">前</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label=この記事を共有する><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label=トップに戻る><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://ki-ta.blog/images/avatar.png alt=プロフィール画像><h4 id=about-card-name>kita21</h4><div id=about-card-bio><strong>no rest no life</strong></div><div id=about-card-job><i class="fa fa-briefcase"></i><br>web engineer</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Japan</div></div></div><div id=cover style=background-image:url(https://ki-ta.blog/images/cover.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://ki-ta.blog/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script>
<script async crossorigin=anonymous defer fbadminids=100035276171326 integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:"",useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(e,t){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(t)})})</script></body></html>